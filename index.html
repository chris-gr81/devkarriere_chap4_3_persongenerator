<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
    <script>
      document.addEventListener("DOMContentLoaded", initializeList);
      let studentsArray = [];
      const lastNames = [
        "Ackermann",
        "Bauer",
        "Ehring",
        "Grimm",
        "Sch√§fer",
        "Theis",
        "Meier",
        "Hauser",
      ];
      const firstNames = [
        "Ralf",
        "Max",
        "Thomas",
        "Sven",
        "Tina",
        "Jana",
        "Lisa",
        "Mia",
      ];

      function initializeList() {
        if (localStorage.getItem("studentsList") !== null) {
          const wrapper = document.getElementById("wrapper");
          studentsArray = JSON.parse(localStorage.getItem("studentsList"));

          for (student of studentsArray) {
            wrapper.appendChild(createNode(student));
          }
        }
      }

      function printPerson() {
        const wrapper = document.getElementById("wrapper");
        const randomPerson = createPersonObject();
        const randomPersonNode = createNode(randomPerson);
        saveInArray(randomPerson);
        wrapper.appendChild(randomPersonNode);
      }

      function saveInArray(student) {
        studentsArray.push(student);
        saveInLocalStorage(studentsArray);
      }

      function saveInLocalStorage(studentsList) {
        localStorage.setItem("studentsList", JSON.stringify(studentsList));
      }

      function createPersonObject() {
        return {
          Vorname: firstNames[Math.floor(Math.random() * firstNames.length)],
          Nachname: lastNames[Math.floor(Math.random() * lastNames.length)],
          Alter: Math.floor(Math.random() * 32) + 18,
        };
      }

      function createNode(person) {
        const container = document.createElement("section");
        container.classList.add("container");
        for (let key in person) {
          const p = document.createElement("p");
          const pText = document.createTextNode(`${key}: ${person[key]}`);
          p.appendChild(pText);
          container.appendChild(p);
        }
        return container;
      }
    </script>
  </head>
  <body>
    <button onclick="printPerson()">ADD</button>
    <main id="wrapper" class="wrapper"></main>
  </body>
</html>
